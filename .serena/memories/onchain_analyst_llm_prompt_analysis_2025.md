# 链上数据分析师LLM Prompt详细分析

## 1. Prompt概述

链上数据分析师的LLM Prompt是一个高度结构化的专业分析提示，专为加密货币链上数据深度分析设计。该Prompt位于`src/crypto_trading_agents/agents/analysts/onchain_analyst.py:735-933`。

## 2. Prompt结构分析

### A. 角色定义
```
你是一位资深的加密货币链上数据分析专家
```
- 明确定义了AI的专业角色和领域专长
- 强调了基于数据的深度分析能力

### B. 数据输入结构

#### 基本信息部分
```python
symbol = raw_data.get("symbol", "未知")
base_currency = raw_data.get("base_currency", "未知")
chain = raw_data.get("chain", "未知")
```

#### 原始链上数据（6个维度）
1. **活跃地址数据**: 日/周/月活跃地址、增长率、历史平均值、百分位
2. **交易指标数据**: 日交易数、平均手续费、总手续费、大额交易数、增长率
3. **交易所流量数据**: 流入/流出/净流量、交易所余额、24小时余额变化
4. **巨鲸活动数据**: 巨鲸交易数、流入/流出、净流量、集中度、大持有者数量
5. **网络健康数据**: 通过`_format_network_health_data`方法格式化
6. **DeFi生态数据**: TVL、DeFi用户数、协议数量、借贷量、DEX交易量

#### 量化分析结果（4个维度）
1. **链上健康度评估**: 综合得分、健康状态、网络活动水平、交易活动水平
2. **市场情绪分析**: 情绪得分、情绪倾向、置信度、关键驱动因素
3. **风险评估**: 风险得分、风险等级、主要风险
4. **关键洞察**: 量化分析发现的关键观察点

### C. 分析要求（6个核心维度）

#### 1. 网络健康度深度解读
- 分析网络活跃度趋势和质量
- 评估网络使用增长的可持续性
- 识别网络发展阶段和成熟度

#### 2. 资金流向分析
- 深度分析交易所流量的市场含义
- 分析巨鲸行为对市场的潜在影响
- 识别机构vs散户的资金流向模式

#### 3. DeFi生态评估（如适用）
- 分析DeFi锁仓量变化趋势
- 评估生态系统创新和采用情况
- 识别DeFi风险和机会

#### 4. 链上情绪判断
- 综合各项指标判断当前链上情绪
- 识别可能的情绪转折信号
- 分析链上数据与价格的背离情况

#### 5. 投资决策支持
- 基于链上数据的中长期投资观点
- 关键链上指标的监控建议
- 风险管理和机会识别

#### 6. 市场周期判断
- 基于链上数据判断当前市场周期阶段
- 预测可能的周期转换信号
- 历史对比和趋势延续性分析

### D. 输出格式要求

Prompt要求以JSON格式返回，包含9个主要字段：

```json
{
    "network_health_analysis": {
        "current_status": "健康/一般/不佳",
        "growth_sustainability": "可持续/放缓/不可持续",
        "network_maturity": "早期/成长期/成熟期",
        "development_trend": "上升/平稳/下降"
    },
    "capital_flow_analysis": {
        "exchange_flow_signal": "累积/分发/平衡",
        "whale_behavior_impact": "看涨/看跌/中性",
        "institutional_activity": "增加/减少/稳定",
        "retail_participation": "活跃/一般/低迷"
    },
    "defi_ecosystem_assessment": {
        "tvl_trend": "增长/稳定/下降",
        "innovation_level": "高/中/低",
        "adoption_rate": "快速/缓慢/停滞",
        "risk_level": "低/中/高"
    },
    "onchain_sentiment": {
        "overall_sentiment": "看涨/看跌/中性",
        "sentiment_strength": 0.0-1.0,
        "divergence_signals": ["信号1", "信号2"],
        "turning_point_probability": 0.0-1.0
    },
    "investment_recommendation": {
        "timeframe": "短期/中期/长期",
        "recommendation": "强烈看涨/看涨/中性/看跌/强烈看跌",
        "key_monitoring_metrics": ["指标1", "指标2"],
        "entry_signals": ["信号1", "信号2"],
        "exit_signals": ["信号1", "信号2"]
    },
    "market_cycle_analysis": {
        "current_phase": "牛市初期/牛市中期/牛市末期/熊市初期/熊市中期/熊市末期/横盘",
        "cycle_confidence": 0.0-1.0,
        "transition_indicators": ["指标1", "指标2"],
        "historical_comparison": "相似/不同"
    },
    "risk_opportunities": {
        "primary_risks": ["风险1", "风险2"],
        "key_opportunities": ["机会1", "机会2"],
        "risk_mitigation": ["策略1", "策略2"]
    },
    "confidence_assessment": {
        "analysis_confidence": 0.0-1.0,
        "data_quality_score": 0.0-1.0,
        "prediction_reliability": "高/中/低"
    },
    "executive_summary": "简洁的分析总结，3-5句话概括关键发现和建议"
}
```

## 3. Prompt特点分析

### 优点
1. **高度结构化**: 清晰的数据输入、分析维度和输出格式
2. **专业性强**: 专注于链上数据的专业分析术语和方法
3. **全面覆盖**: 涵盖网络健康、资金流向、DeFi生态、市场情绪等多个维度
4. **实用导向**: 输出包含具体的投资建议和风险管理策略
5. **数据驱动**: 强调基于客观数据分析，避免主观臆断

### 技术亮点
1. **元分析能力**: 不仅分析原始数据，还分析传统量化分析的结果
2. **多维度评估**: 从6个核心维度进行深度分析
3. **量化输出**: 所有分析结果都要求量化为具体数值或等级
4. **容错设计**: 考虑了加密货币市场的高波动性和24/7交易特点
5. **历史对比**: 强调历史数据对比和趋势延续性分析

## 4. 与其他分析师的对比

### 相对于情绪分析师
- **数据源不同**: 情绪分析师主要依赖社交媒体和新闻数据，链上分析师专注链上交易数据
- **分析维度不同**: 情绪分析师关注市场情绪周期，链上分析师关注网络健康和资金流向
- **输出重点不同**: 情绪分析师输出情绪预测，链上分析师输出投资建议和网络评估

### 相对于市场分析师
- **数据深度不同**: 链上分析师数据更底层、更真实（直接来自区块链）
- **分析角度不同**: 链上分析师从网络使用角度分析，市场分析师从价格角度分析
- **预测时效不同**: 链上数据通常领先于价格变化，具有预测性价值

## 5. 实际应用效果

根据Solana分析实现的测试结果，该Prompt能够：
- 有效识别网络健康状态和增长趋势
- 准确分析资金流向和市场情绪
- 提供有价值的投资建议和风险管理策略
- 生成结构化的专业分析报告

## 6. 优化建议

1. **增加更多链上指标**: 如MVRV比率、NVT比率、实现损益等
2. **强化跨链分析**: 支持多链对比和关联分析
3. **增加实时性**: 考虑实时数据流和动态更新
4. **优化风险模型**: 更精细的风险评估和预警机制
5. **增加可视化支持**: 为分析结果提供可视化展示建议